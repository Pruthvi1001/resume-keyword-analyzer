<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Home | Smart Resume Analyzer{% endblock %}

{% block content %}
<div class="text-center mt-4">
    <h2>Analyze Your Resume Against a Job Description</h2>
    <p class="lead text-muted">Get an instant match score and keyword insights to tailor your application.</p>
</div>

<div class="main-card mx-auto" style="max-width: 800px;">
    <form id="analysis-form" action="/" method="post" enctype="multipart/form-data">
        <div class="mb-4">
            <label for="resume" class="form-label">
                <i class="fas fa-file-pdf text-danger"></i> 1. Upload Your Resume (PDF only)
            </label>
            <input class="form-control" type="file" id="resume" name="resume" accept=".pdf" required>
        </div>
        
        <div class="mb-4">
            <label for="job_description" class="form-label">
                <i class="fas fa-clipboard-list text-primary"></i> 2. Paste Job Description
            </label>
            <textarea class="form-control" id="job_description" name="job_description" rows="10" placeholder="Paste the full job description here..." required></textarea>
        </div>
        
        <div class="d-grid">
            <button id="analyze-button" type="submit" class="btn btn-primary btn-lg">
                <span id="button-text">Analyze Match</span>
                <span id="button-spinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
            </button>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    // JavaScript to show a loading spinner on form submission
    const form = document.getElementById('analysis-form');
    const analyzeButton = document.getElementById('analyze-button');
    const buttonText = document.getElementById('button-text');
    const buttonSpinner = document.getElementById('button-spinner');

    form.addEventListener('submit', function() {
        // Disable the button to prevent multiple submissions
        analyzeButton.disabled = true;

        // Show spinner and hide text
        buttonText.textContent = 'Analyzing...';
        buttonSpinner.classList.remove('d-none');
    });
</script>
{% endblock %}